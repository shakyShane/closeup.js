<!DOCTYPE html>
<html>
<head>
    <title>Norman.js Example 1</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style type="text/css">
        body {
            font-family: sans-serif;
        }

        .wrapper {
            text-align: center;
        }

        .image {
            display: inline-block;
            margin: 0 auto;
        }


        .image .zoom-image:hover {
            /*cursor: pointer;*/
        }

        .image .zoom-image {
            /*z-index: 2;*/
            /*position: absolute;*/
            /*top: 0;*/
            /*left: 0;*/
            /*opacity: 0;*/
            /*-webkit-transition: opacity .5s;*/
        }

        .touch {
            width: 353px;
            height: 421px;
            position: absolute;
            display: block;
            top: 0;
            left: 0;
            z-index: 3;
        }

        .touch:hover {
            cursor: crosshair;
        }

        .loader {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            z-index: 10;
            display: none;
            color: white;
            padding-top: 30px;
        }
    </style>
</head>
<body>
<p id="debug">Debug</p>
<div class="wrapper">
    <div class="image" id="zoom-window">
        <img src="img/421.jpg" alt="" width="353" class="base-image" />
    </div>

    <div class="switcher">
        <!--<a href="img/421.jpg" data-large="img/600.jpg">Image 1</a>-->
        <a href="img/421.jpg" data-large="img/1200.jpg">Image 2</a>
    </div>

    <button id="showZoomImage">Show Zoom Image</button>
    <button id="hideZoomImage">Hide Zoom Image</button>
</div>

<!--<script src="polyfills/ie8.js"></script>-->
<script src="../../bower_components/norman.js/lib/norman.js"></script>
<script src="../../lib/closeup.js"></script>
<script type="text/javascript">
    var config = {
        loadDelay: 2000,
        callbacks: {
            "init": function () {
                var loaded = document.createElement("DIV");
                loaded.style.position = "absolute";
                loaded.style.color    = "white";
                loaded.style.top      = "0";
                loaded.style.left     = "0";
                loaded.style.zIndex   = "3";
                loaded.style.display  = "none";
                loaded.style.width    = "100%";
                loaded.style.height   = "100%";
                loaded.innerText      = "LOADING";
                this.$loader          = loaded;
                this.$wrapper.appendChild(this.$loader);
            },
            "zoom image loading": function (src) {
                this.$loader.style.display = "block";
            },
            "zoom image loaded": function () {
                var that = this;
                window.setTimeout(function () {
                    that.$loader.style.display = "none";
                }, 2000);
            },
            "update zoom position": function (vals) {
//                console.log(vals);
            },
            "mouse move": function (vals) {
//                console.log(vals);
            },
            "mouse enter": function (vals) {
//                this.$loader.style.display = "block";
            },
            "mouse leave": function (vals) {
//                this.$loader.style.display = "none";
            }
        }
    };
    var zoomer = new Closeup(
        document.querySelector("#zoom-window"),
        document.querySelector(".base-image"), config);

    zoomer.setZoomImage("img/600.jpg");

    var button     = document.querySelector("#showZoomImage");
    var buttonHide = document.querySelector("#hideZoomImage");

    button.addEventListener("touchstart", function (evt) {
        evt.preventDefault();
        zoomer.showZoomed();
    }, false);

    buttonHide.addEventListener("touchstart", function (evt) {
        evt.preventDefault();
        zoomer.hideZoomed();
    }, false);

    var buttons = document.querySelector(".switcher");

    buttons.addEventListener("click", function (evt) {
        evt.preventDefault();
        var targetElem = evt.target;
        var src = targetElem.dataset.large;
        zoomer.setZoomImage(src);
    }, false);

</script>

</body>
</html>